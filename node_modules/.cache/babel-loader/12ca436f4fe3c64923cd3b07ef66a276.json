{"ast":null,"code":"import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport json from \"../assets/json/cards.json\";\nimport { useRoute } from \"vue-router\";\nexport default {\n  name: \"SCC0219TrabalhoWebCatalogueView\",\n  data: function data() {\n    return {\n      route: useRoute(),\n      cards: json,\n      numPages: 0\n    };\n  },\n  mounted: function mounted() {\n    this.cards = json.filter(function (obj) {\n      if (useRoute().query.category == null && useRoute().query.search == null) return obj; // Verificar se foi feito uma busca\n\n      if (useRoute().query.search != null) {\n        if (obj.name.toLowerCase().includes(useRoute().query.search.toLowerCase())) {\n          return obj;\n        }\n      }\n\n      switch (parseInt(useRoute().query.category)) {\n        case 0:\n          if (obj.supertype == \"Pokémon\") return obj;\n          break;\n\n        case 1:\n          if (obj.supertype == \"Trainer\") return obj;\n          break;\n\n        case 2:\n          if (obj.supertype == \"Energy\") return obj;\n          break;\n\n        case 3:\n          if (obj.rarity == \"Common\") return obj;\n          break;\n\n        case 4:\n          if (obj.rarity == \"Uncommon\") return obj;\n          break;\n\n        case 5:\n          if (obj.rarity == \"Rare\") return obj;\n          break;\n\n        case 6:\n          if (obj.rarity == \"Promo\") return obj;\n          break;\n      }\n    });\n    this.numPages = Math.ceil(parseInt(parseInt(this.cards.length) / 20)); // Depois de montado, pegar as cartas do banco de dados, o que pode demorar alguns segundos devido a quantidade de cartas\n\n    this.syncDataBase();\n  },\n  methods: {\n    syncDataBase: function syncDataBase() {\n      var _this = this;\n\n      fetch(\"http://127.0.0.1:3000/cards/getAllCards\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        res.json().then(function (response) {\n          _this.cards = response.filter(function (obj) {\n            if (_this.route.query.category == null && _this.route.query.search == null) return obj; // Verificar se foi feito uma busca\n\n            if (_this.route.query.search != null) {\n              if (obj.name.toLowerCase().includes(_this.route.query.search.toLowerCase())) {\n                return obj;\n              }\n            }\n\n            switch (parseInt(_this.route.query.category)) {\n              case 0:\n                if (obj.supertype == \"Pokémon\") return obj;\n                break;\n\n              case 1:\n                if (obj.supertype == \"Trainer\") return obj;\n                break;\n\n              case 2:\n                if (obj.supertype == \"Energy\") return obj;\n                break;\n\n              case 3:\n                if (obj.rarity == \"Common\") return obj;\n                break;\n\n              case 4:\n                if (obj.rarity == \"Uncommon\") return obj;\n                break;\n\n              case 5:\n                if (obj.rarity == \"Rare\") return obj;\n                break;\n\n              case 6:\n                if (obj.rarity == \"Promo\") return obj;\n                break;\n            }\n          });\n          _this.numPages = Math.ceil(parseInt(parseInt(_this.cards.length) / 20));\n        })[\"catch\"](function (err) {\n          alert(\"Erro ao procurar quantidade de cartas no estoque!\");\n          console.log(\"Erro: \" + err);\n        });\n      })[\"catch\"](function (err) {\n        console.log(\"Erro: \" + err);\n      });\n    },\n    updateCards: function updateCards(cat) {\n      window.scrollTo(0, 0);\n      if (cat == -1) return;\n      this.cards = json.filter(function (obj) {\n        switch (cat) {\n          case 0:\n            if (obj.supertype == \"Pokémon\") return obj;\n            break;\n\n          case 1:\n            if (obj.supertype == \"Trainer\") return obj;\n            break;\n\n          case 2:\n            if (obj.supertype == \"Energy\") return obj;\n            break;\n\n          case 3:\n            if (obj.rarity == \"Common\") return obj;\n            break;\n\n          case 4:\n            if (obj.rarity == \"Uncommon\") return obj;\n            break;\n\n          case 5:\n            if (obj.rarity == \"Rare\") return obj;\n            break;\n\n          case 6:\n            if (obj.rarity == \"Promo\") return obj;\n            break;\n        }\n      });\n      this.numPages = Math.ceil(this.cards.length / 20);\n    },\n    getPrevPageParams: function getPrevPageParams(arg) {\n      // Checar se não está na página 0\n      if (parseInt(this.route.query.page) == 0) return \"#\";\n      var ret = \"?page=\";\n      if (arg == -1) ret += 0;else ret += parseInt(this.route.query.page) - 1; // Checar se não há mais parametros como o category ou search\n\n      if (this.route.query.category != null) ret += \"&category=\" + this.route.query.category;\n      if (this.route.query.search != null) ret += \"&search=\" + this.route.query.search;\n      return ret;\n    },\n    getNextPageParams: function getNextPageParams(arg) {\n      // Checar se não está na última página\n      if (parseInt(this.route.query.page) >= this.numPages) return \"#\";\n      var ret = \"?page=\";\n      if (arg == -1) ret += this.numPages;else ret += parseInt(this.route.query.page) + 1; // Checar se não há mais parametros como o category ou search\n\n      if (this.route.query.category != null) ret += \"&category=\" + this.route.query.category;\n      if (this.route.query.search != null) ret += \"&search=\" + this.route.query.search;\n      return ret;\n    },\n    getCardHighPrice: function getCardHighPrice(card) {\n      if (card.tcgplayer == null) return 6.5;\n      if (card.tcgplayer.prices == null) return 6.5;\n      if (card.tcgplayer.prices.holofoil != null) return card.tcgplayer.prices.holofoil.market;\n      if (card.tcgplayer.prices.normal != null) return card.tcgplayer.prices.normal.market;\n      return 6.5;\n    },\n    getCardLowPrice: function getCardLowPrice(card) {\n      if (card.tcgplayer == null) return 5.5;\n      if (card.tcgplayer.prices == null) return 5.5;\n      if (card.tcgplayer.prices.holofoil != null) return card.tcgplayer.prices.holofoil.low;\n      if (card.tcgplayer.prices.normal != null) return card.tcgplayer.prices.normal.low;\n      return 5.5;\n    },\n    addToCart: function addToCart(card) {\n      // Checar se a quantidade de cards no estoque não é zero\n      var sCard = this.cards.filter(function (obj) {\n        if (obj.id == card.id) return obj;\n      })[0];\n\n      if (sCard.quantity == 0) {\n        alert(\"Não há cartas no estoque!\");\n        return;\n      }\n\n      card = JSON.parse(JSON.stringify(card));\n      var cart = localStorage.cart == \"\" ? [] : JSON.parse(localStorage.cart);\n      var index = cart.findIndex(function (c) {\n        return c.card.id == card.id;\n      });\n\n      if (index != -1) {\n        cart[index].qtd++;\n      } else {\n        cart.push({\n          card: card,\n          qtd: 1\n        });\n      }\n\n      localStorage.cart = JSON.stringify(cart);\n      alert(card.name + \" adicionado ao carrinho!\");\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["json","useRoute","name","data","route","cards","numPages","mounted","filter","obj","query","category","search","toLowerCase","includes","parseInt","supertype","rarity","Math","ceil","length","syncDataBase","methods","fetch","method","headers","Accept","then","res","response","err","alert","console","log","updateCards","cat","window","scrollTo","getPrevPageParams","arg","page","ret","getNextPageParams","getCardHighPrice","card","tcgplayer","prices","holofoil","market","normal","getCardLowPrice","low","addToCart","sCard","id","quantity","JSON","parse","stringify","cart","localStorage","index","findIndex","c","qtd","push"],"sourceRoot":"","sources":["/home/dead/trabalho_web/SCC0219_Trabalho_Web/src/views/CatalogueView.vue"],"sourcesContent":["<template>\n  <div>\n    <h3 class=\"catalogue-title\">All Products</h3>\n    <div class=\"catalogue\">\n      <div class=\"categories-menu\">\n        <div class=\"categories-menu-item\">\n          <button\n            class=\"btn-categories-menu-item\"\n            @click=\"\n              updateCards(0),\n                $router.push({\n                  name: 'catalogue',\n                  query: { page: '0', category: '0' },\n                })\n            \"\n          >\n            <i class=\"fa fa-th-large\"></i>\n            Pokemon\n          </button>\n          <button\n            class=\"btn-categories-menu-item\"\n            @click=\"\n              updateCards(1),\n                $router.push({\n                  name: 'catalogue',\n                  query: { page: '0', category: '1' },\n                })\n            \"\n          >\n            <i class=\"fa fa-th-large\"></i>\n            Trainers\n          </button>\n          <button\n            class=\"btn-categories-menu-item\"\n            @click=\"\n              updateCards(2),\n                $router.push({\n                  name: 'catalogue',\n                  query: { page: '0', category: '2' },\n                })\n            \"\n          >\n            <i class=\"fa fa-th-large\"></i>\n            Energy\n          </button>\n          <button\n            class=\"btn-categories-menu-item\"\n            @click=\"\n              updateCards(3),\n                $router.push({\n                  name: 'catalogue',\n                  query: { page: '0', category: '3' },\n                })\n            \"\n          >\n            <i class=\"fa fa-th-large\"></i>\n            Common\n          </button>\n          <button\n            class=\"btn-categories-menu-item\"\n            @click=\"\n              updateCards(4),\n                $router.push({\n                  name: 'catalogue',\n                  query: { page: '0', category: '4' },\n                })\n            \"\n          >\n            <i class=\"fa fa-th-large\"></i>\n            Uncommon\n          </button>\n          <button\n            class=\"btn-categories-menu-item\"\n            @click=\"\n              updateCards(5),\n                $router.push({\n                  name: 'catalogue',\n                  query: { page: '0', category: '5' },\n                })\n            \"\n          >\n            <i class=\"fa fa-th-large\"></i>\n            Rare\n          </button>\n          <button\n            class=\"btn-categories-menu-item\"\n            @click=\"\n              updateCards(6),\n                $router.push({\n                  name: 'catalogue',\n                  query: { page: '0', category: '6' },\n                })\n            \"\n          >\n            <i class=\"fa fa-th-large\"></i>\n            Promotional\n          </button>\n        </div>\n      </div>\n      <div class=\"all-products\">\n        <div\n          class=\"card\"\n          v-for=\"card in cards.slice(\n            route.query.page * 20,\n            route.query.page * 20 + 20\n          )\"\n          v-bind:key=\"card.id\"\n        >\n          <img\n            :src=\"card.images.small\"\n            :alt=\"card.name\"\n            class=\"card-image\"\n            @click=\"\n              updateCards(-1),\n                $router.push({\n                  name: 'itemPage',\n                  query: { id: card.id },\n                })\n            \"\n            style=\"cursor: pointer\"\n          />\n          <div class=\"card-description\">\n            <p class=\"card-type\">{{ card.supertype }}</p>\n            <h3\n              class=\"card-name\"\n              @click=\"\n                scrollToTop(-1),\n                  $router.push({\n                    name: 'itemPage',\n                    query: { id: card.id },\n                  })\n              \"\n              style=\"cursor: pointer\"\n            >\n              {{ card.name }}\n            </h3>\n            <div class=\"card-stars\">\n              <i class=\"fa fa-star\"></i>\n              <i class=\"fa fa-star\"></i>\n              <i class=\"fa fa-star\"></i>\n              <i class=\"fa-solid fa-star-sharp-half\"></i>\n              <i class=\"fa fa-star-o\"></i>\n            </div>\n            <p class=\"card-seller\">By {{ card.set.name }}</p>\n            <div class=\"card-buy\">\n              <p class=\"card-price\">${{ getCardLowPrice(card) }}</p>\n              <p class=\"card-original-price\">${{ getCardHighPrice(card) }}</p>\n              <button class=\"card-add-cart\" @click=\"addToCart(card)\">\n                <i class=\"fa fa-shopping-cart\"></i>\n                Add\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <h3 class=\"navigate-text\">Navigate</h3>\n    <br />\n    <div class=\"catalogue-navigate\">\n      <a :href=\"getPrevPageParams(0)\">&laquo;</a>\n      <a :href=\"getPrevPageParams(-1)\">0</a>\n      <a href=\"#\">...</a>\n      <a href=\"#\" style=\"color: #ffcb05\">{{ route.query.page }}</a>\n      <a href=\"#\">...</a>\n      <a :href=\"getNextPageParams(-1)\">{{ numPages }}</a>\n      <a :href=\"getNextPageParams(0)\">&raquo;</a>\n    </div>\n  </div>\n</template>\n<!-- Não esquecer de adicionar as novas rotas no index.js do router! -->\n<script>\nimport json from \"../assets/json/cards.json\";\nimport { useRoute } from \"vue-router\";\n\nexport default {\n  name: \"SCC0219TrabalhoWebCatalogueView\",\n\n  data() {\n    return {\n      route: useRoute(),\n      cards: json,\n      numPages: 0,\n    };\n  },\n\n  mounted() {\n    this.cards = json.filter(function (obj) {\n      if (useRoute().query.category == null && useRoute().query.search == null)\n        return obj;\n      // Verificar se foi feito uma busca\n      if (useRoute().query.search != null) {\n        if (\n          obj.name.toLowerCase().includes(useRoute().query.search.toLowerCase())\n        ) {\n          return obj;\n        }\n      }\n      switch (parseInt(useRoute().query.category)) {\n        case 0:\n          if (obj.supertype == \"Pokémon\") return obj;\n          break;\n        case 1:\n          if (obj.supertype == \"Trainer\") return obj;\n          break;\n        case 2:\n          if (obj.supertype == \"Energy\") return obj;\n          break;\n        case 3:\n          if (obj.rarity == \"Common\") return obj;\n          break;\n        case 4:\n          if (obj.rarity == \"Uncommon\") return obj;\n          break;\n        case 5:\n          if (obj.rarity == \"Rare\") return obj;\n          break;\n        case 6:\n          if (obj.rarity == \"Promo\") return obj;\n          break;\n      }\n    });\n    this.numPages = Math.ceil(parseInt(parseInt(this.cards.length) / 20));\n\n    // Depois de montado, pegar as cartas do banco de dados, o que pode demorar alguns segundos devido a quantidade de cartas\n    this.syncDataBase();\n  },\n\n  methods: {\n    syncDataBase() {\n      fetch(\"http://127.0.0.1:3000/cards/getAllCards\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      })\n        .then((res) => {\n          res\n            .json()\n            .then((response) => {\n              this.cards = response.filter((obj) => {\n                if (\n                  this.route.query.category == null &&\n                  this.route.query.search == null\n                )\n                  return obj;\n                // Verificar se foi feito uma busca\n                if (this.route.query.search != null) {\n                  if (\n                    obj.name\n                      .toLowerCase()\n                      .includes(this.route.query.search.toLowerCase())\n                  ) {\n                    return obj;\n                  }\n                }\n                switch (parseInt(this.route.query.category)) {\n                  case 0:\n                    if (obj.supertype == \"Pokémon\") return obj;\n                    break;\n                  case 1:\n                    if (obj.supertype == \"Trainer\") return obj;\n                    break;\n                  case 2:\n                    if (obj.supertype == \"Energy\") return obj;\n                    break;\n                  case 3:\n                    if (obj.rarity == \"Common\") return obj;\n                    break;\n                  case 4:\n                    if (obj.rarity == \"Uncommon\") return obj;\n                    break;\n                  case 5:\n                    if (obj.rarity == \"Rare\") return obj;\n                    break;\n                  case 6:\n                    if (obj.rarity == \"Promo\") return obj;\n                    break;\n                }\n              });\n              this.numPages = Math.ceil(\n                parseInt(parseInt(this.cards.length) / 20)\n              );\n            })\n            .catch((err) => {\n              alert(\"Erro ao procurar quantidade de cartas no estoque!\");\n              console.log(\"Erro: \" + err);\n            });\n        })\n        .catch((err) => {\n          console.log(\"Erro: \" + err);\n        });\n    },\n    updateCards(cat) {\n      window.scrollTo(0, 0);\n      if (cat == -1) return;\n      this.cards = json.filter(function (obj) {\n        switch (cat) {\n          case 0:\n            if (obj.supertype == \"Pokémon\") return obj;\n            break;\n          case 1:\n            if (obj.supertype == \"Trainer\") return obj;\n            break;\n          case 2:\n            if (obj.supertype == \"Energy\") return obj;\n            break;\n          case 3:\n            if (obj.rarity == \"Common\") return obj;\n            break;\n          case 4:\n            if (obj.rarity == \"Uncommon\") return obj;\n            break;\n          case 5:\n            if (obj.rarity == \"Rare\") return obj;\n            break;\n          case 6:\n            if (obj.rarity == \"Promo\") return obj;\n            break;\n        }\n      });\n      this.numPages = Math.ceil(this.cards.length / 20);\n    },\n    getPrevPageParams(arg) {\n      // Checar se não está na página 0\n      if (parseInt(this.route.query.page) == 0) return \"#\";\n      let ret = \"?page=\";\n      if (arg == -1) ret += 0;\n      else ret += parseInt(this.route.query.page) - 1;\n      // Checar se não há mais parametros como o category ou search\n      if (this.route.query.category != null)\n        ret += \"&category=\" + this.route.query.category;\n      if (this.route.query.search != null)\n        ret += \"&search=\" + this.route.query.search;\n      return ret;\n    },\n    getNextPageParams(arg) {\n      // Checar se não está na última página\n      if (parseInt(this.route.query.page) >= this.numPages) return \"#\";\n      let ret = \"?page=\";\n      if (arg == -1) ret += this.numPages;\n      else ret += parseInt(this.route.query.page) + 1;\n      // Checar se não há mais parametros como o category ou search\n      if (this.route.query.category != null)\n        ret += \"&category=\" + this.route.query.category;\n      if (this.route.query.search != null)\n        ret += \"&search=\" + this.route.query.search;\n      return ret;\n    },\n    getCardHighPrice(card) {\n      if (card.tcgplayer == null) return 6.5;\n      if (card.tcgplayer.prices == null) return 6.5;\n      if (card.tcgplayer.prices.holofoil != null)\n        return card.tcgplayer.prices.holofoil.market;\n      if (card.tcgplayer.prices.normal != null)\n        return card.tcgplayer.prices.normal.market;\n      return 6.5;\n    },\n    getCardLowPrice(card) {\n      if (card.tcgplayer == null) return 5.5;\n      if (card.tcgplayer.prices == null) return 5.5;\n      if (card.tcgplayer.prices.holofoil != null)\n        return card.tcgplayer.prices.holofoil.low;\n      if (card.tcgplayer.prices.normal != null)\n        return card.tcgplayer.prices.normal.low;\n      return 5.5;\n    },\n    addToCart(card) {\n      // Checar se a quantidade de cards no estoque não é zero\n      let sCard = this.cards.filter(function (obj) {\n        if (obj.id == card.id) return obj;\n      })[0];\n      if (sCard.quantity == 0) {\n        alert(\"Não há cartas no estoque!\");\n        return;\n      }\n\n      card = JSON.parse(JSON.stringify(card));\n      let cart = localStorage.cart == \"\" ? [] : JSON.parse(localStorage.cart);\n      let index = cart.findIndex((c) => c.card.id == card.id);\n      if (index != -1) {\n        cart[index].qtd++;\n      } else {\n        cart.push({ card: card, qtd: 1 });\n      }\n      localStorage.cart = JSON.stringify(cart);\n      alert(card.name + \" adicionado ao carrinho!\");\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}